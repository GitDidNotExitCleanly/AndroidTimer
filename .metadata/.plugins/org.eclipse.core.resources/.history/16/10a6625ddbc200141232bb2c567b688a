package com.app.stopwatch;

import android.app.Service;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Binder;
import android.os.IBinder;
import android.view.View;
import android.widget.TextView;

public class TimerService extends Service {
	
	public class TimerBinder extends Binder {
		TimerService getService() {
			return TimerService.this;
		}
	}
	
	private IBinder timerBinder;
	
	public TimerService() {
		timerBinder = new TimerBinder();
	}

	@Override
	public IBinder onBind(Intent intent) {
		return timerBinder;
	}
	
	/*********************************************/
	
	private TextView largeTime = null;
	private TextView smallTime = null;
	
	private class CountTimeTask extends AsyncTask<Long,Void,String> {

		@Override
		protected String doInBackground(Long... startTime) {
			long millis = System.currentTimeMillis() - startTime[0];
	        int seconds = (int) (millis / 1000);
	        int minutes = seconds / 60;
	        seconds = seconds % 60;
	        
			return String.format("%d:%02d", minutes, seconds);
		}
		
		protected void onPostExecute(String result) {
			largeTime.setText(result);
		}
	}
	
	public void bindView(TextView largeTime,TextView smallTime) {
		this.largeTime = largeTime;
		this.smallTime = smallTime;
	}
	
	public void timerStart(long startTime) {
		if (this.largeTime != null && this.smallTime != null) {
			new CountTimeTask
		}
	}
	
	
}
